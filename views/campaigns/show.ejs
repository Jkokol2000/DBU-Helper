<%- include('../partials/header') %>

    <div class="campaign-details">
        <h1>
            <%= campaign.name %>
        </h1>
        <p>
            <%= campaign.description %>
        </p>
        <ul>Current Characters</ul>
        <% campaign.characters.forEach(function(character) { %>
        <li><%= character.name %> - <a href='/characters/<%= character._id %>'>Details</a></li>
        <%}); %>
        </p>
    </div>
    <% if (isCreator === false && isPlayer === false) { %>
        <form action="/campaigns/<%= campaign._id %>/characters" method="post">
            <select name="characterId">
                <% characters.forEach(function(character) { %>
                    <% if (character.user.equals(currentUser._id) && campaign.characters.includes(character._id) === false) { %>
                        <option value="<%= character._id %>">
                            <%= character.name %>
                        </option>
                    <% } %>
                <% }); %>
            </select>
            <input type="submit" value="Add Character">
        </form>
<% } %>

    <% if (isCreator === true) { %>
        <form action="/campaigns/<%= campaign._id %>?_method=DELETE" method="POST">
            <button  type="submit" onclick="return confirm('Are you sure you want to delete this campaign?');">Delete this Campaign</button>
        </form>
        <% } %>
    

<%- include('../partials/footer') %>